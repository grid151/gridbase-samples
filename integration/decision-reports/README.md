# GridBase Decision Reports

GridBase Decision Reports (powered by X1 Analytics) allows lenders to close more quickly and determine the title condition (including "Clear to Close").

# API Guide

Before you begin, make sure you already have a GridBase sandbox account for development and testing purposes. You'll need to log in and acquire your access token as [described in the introduction](https://github.com/grid151/gridbase-samples#authentication-with-the-gridbase-api).

## Step 1: Stage and Place an Order

To stage a new order, submit an HTTP POST request to `/v1/orders/stage` using the [example request](01_stage.json). This will return a 201 (created) response with the order object you submitted, with the order ID in the `id` property. Fields include:

| Field Name | Field Description | Requred |
|---|---|---|
| `orderDetails.loanNumber` | Your Order ID or Loan/File Number | &check; |
| `orderDetails.loanAmount` | The new loan amount | &check; |
| `orderDetails.salesPrice` | The sale price of the property | &check; |
| `orderDetails.transactionTypeDesc` | The type of transaction (e.g. "Purchase Loan", "Purchase Cash", "Refinance", etc..) | &check; |
| `parties.buyers[].lastName` | Buyers Last Name | &check; |
| `parties.buyers[].firstName` | Buyers First Name | &check; |
| `parties.lender.companyName` | Lender Company Name | &check; |
| `property.address.street` | Property Address 1 | &check; |
| `property.address.cityDesc` | Property City/Locality Description | &check; |
| `property.address.stateId` | Property State | &check; |
| `property.address.zip` | Property Zip/Postal Code | &check; |



Once the order is staged, you may then submit a PUT request to `/v1/orders/place/{id}` (where `{id}` is replaced with the order ID returned from the previous request). Note that order placement may take some time to complete

## Step 2: Retrieve the Report

Once order placement has completed, you may submit a GET request to `/v1/core/reports/generate` with the following request body to generate a report:

```json
{
    "OrderId": "{id}",
    "ReportId": "6324d73af55f885d0d71b6a4",
    "ReportFormat": "pdf"
}
```

## Orderb Updates or Corrections:

To update an existing order, submit an HTTP POST request to `/v1/orders/update` using the [example request](01_stage.json) where the main difference between the stage is the ID field is populated. This will return a 200 (successful) response with the order object you submitted.

Once the order has been updated, you may then submit a PUT request to `/v1/orders/place/{id}` (where `{id}` is the order ID). Note that order placement may take some time to complete

Finally step 2 can be repeated for an updated report.


### Report Ids

Different types of reports may be generated by passing the corresponding `ReportId` value, including:
- `6324d73af55f885d0d71b6a4` - Lender Decision Report
- `6324d851f55f885d0d71b6a9` - Title Decision Report

### Report Formats

Supported formats include `pdf` and `xml`.

- `xml` - provides raw report data as an XML document, which may be used to implement process automation. 
- `pdf` - provides a pre-formatted, print-friendly PDF document.
